<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <title>스파르타코딩클럽 | 부트스트랩 연습하기</title>
    <style>
        .container {
            max-width: 1200px;
            width: 95%;
            margin: 20px auto 0 auto;
        }
        .image {
            max-width: 800px;
            box-shadow: 0px 0px 10px 0px lightgray;
            margin: 20px auto;
        }
        .content {
            max-width: 800px;
            width: 95%;
            margin: 20px auto 0 auto;
            padding: 20px;
            box-shadow: 0 0 3px 0 grey;
        }


        .comment-box {
            max-width: 800px;
            width: 95%;
            margin: 20px auto 0 auto;
            padding: 20px;
            box-shadow: 0 0 3px 0 grey;
        }
        .comment {
            width: 95%;
            max-width: 800px;
            box-shadow: 0px 0px 10px 0px lightgray;
            margin: 20px auto;
        }

        .mybtns > button {
            margin-top: 10px;
        }

    </style>
    <script>
        $(document).ready(function () {
            show_comment()
        });
        function save_comment() {
            let nickname = $('#name').val()
            let comment = $('#comment').val()
            $.ajax({
                type: 'POST',
                url: '/save-comment',
                data: {nickname_give: nickname, comment_give: comment},
                success: function (response) {
                    alert(response['msg'])
                    window.location.reload()
                }
            })
        }

        function show_comment() {
            $.ajax({
                type: "GET",
                url: "/all-comment",
                data: {},
                success: function (response) {
                    let rows = response['comment_list']
                    for (let i = 0; i < rows.length; i++) {
                        let nickname = rows[i]['nickname']
                        let comment = rows[i]['comment']

                        let temp_html = `<div class="comment">
                                            <div class="card-body">
                                                <blockquote class="blockquote mb-0">
                                                    <p>${comment}</p>
                                                    <footer class="blockquote-footer">${nickname}</cite>
                                                    </footer>
                                                </blockquote>
                                            </div>
                                        </div>`
                        $('#comment-list').append(temp_html)
                    }
                }
            });
        }
    </script>
</head>

<body>
<div class="container">
    <div class="row">
        <div class="col-md-6">
            <div class="image">
                <img src="https://cdn.pixabay.com/photo/2015/03/12/04/43/landscape-669619_960_720.jpg" class="img-fluid" alt="...">
            </div>
        </div>
        <div class="col-md-6">
            <div class="content">
                <h3>제목 : 좋은 곳</h3>
                <h4>장소 : 서울시 어딘가</h4>
                <h4>평점 : ⭐⭐⭐⭐</h4>
                <h5>리뷰 : Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut
                    labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
                    nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit
                    esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
                    culpa qui officia deserunt mollit anim id est laborum.

                </h5>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="comment-box">
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="name" placeholder="닉네임">
                <label for="name">닉네임</label>
            </div>
            <div class="form-floating">
                <textarea class="form-control" placeholder="Leave a comment here" id="comment"
                          style="height: 100px"></textarea>
                <label for="comment">코멘트 입력</label>
            </div>
            <div class="mybtns">
                <button onclick="save_comment()" type="button" class="btn btn-dark" >기록하기</button>
            </div>
            <div class="cards" id="comment-list">
            </div>
        </div>

    </div>
    <div class="row">

    </div>
</div>

</body>

</html>